<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»£ç æ–‡æ¡£ - ç‰©è”ç½‘å­¦ä¹ </title>
    <!-- å¤ç”¨åŸæœ‰ç¬¬ä¸‰æ–¹CDNï¼ˆä¿è¯é£æ ¼/ç‰ˆæœ¬ç»Ÿä¸€ï¼‰ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
    <style>
        /* ä¿æŒä¸åŸæœ‰é¡µé¢é£æ ¼ç»Ÿä¸€ */
        :root {
            --primary-color: #007bff;
            --primary-hover: #0056b3;
            --bg-color: #fff;
            --text-color: #333;
            --card-bg: #f8f9fa;
            --border-color: #eee;
        }
        .dark-mode {
            --bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --card-bg: #2d2d2d;
            --border-color: #3d3d3d;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: var(--bg-color);
            color: var(--text-color);
            font-family: "Microsoft YaHei", sans-serif;
            line-height: 1.8;
            transition: all 0.3s ease;
        }
        header {
            padding: 15px 30px;
            background: var(--card-bg);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        nav a {
            color: var(--text-color);
            text-decoration: none;
            margin-right: 20px;
        }
        nav a.active {
            color: var(--primary-color);
            font-weight: bold;
        }
        .mode-btn {
            padding: 6px 12px;
            background: var(--primary-color);
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.2s;
        }
        .mode-btn:hover {
            background: var(--primary-hover);
        }
        main {
            max-width: 1000px;
            margin: 40px auto;
            padding: 0 20px;
        }
        .md-content {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        /* Markdownæ¸²æŸ“æ ·å¼ä¼˜åŒ– */
        .md-content h1 {
            font-size: 2em;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }
        .md-content h2 {
            font-size: 1.6em;
            margin: 25px 0 15px;
            color: var(--primary-color);
        }
        .md-content h3 {
            font-size: 1.3em;
            margin: 20px 0 10px;
        }
        .md-content p {
            margin: 15px 0;
        }
        .md-content pre {
            background: #1e1e1e;
            color: #e0e0e0;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 20px 0;
        }
        .md-content code {
            padding: 2px 4px;
            background: #eee;
            border-radius: 4px;
            font-family: "Consolas", monospace;
        }
        .md-content pre code {
            background: none;
            padding: 0;
        }
        .md-content ul, .md-content ol {
            margin: 15px 0 15px 30px;
        }
        .md-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        footer {
            text-align: center;
            padding: 20px;
            background: var(--card-bg);
            margin-top: 60px;
        }
        /* å›åˆ°åŸé¡µé¢æŒ‰é’® */
        .back-btn {
            display: inline-block;
            margin-bottom: 20px;
            padding: 8px 16px;
            background: var(--primary-color);
            color: #fff;
            text-decoration: none;
            border-radius: 4px;
            transition: 0.2s;
        }
        .back-btn:hover {
            background: var(--primary-hover);
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div>
                <a href="../../index.html">é¦–é¡µ</a>
                <a href="index.html" class="active">ç‰©è”ç½‘å­¦ä¹ </a>
                <a href="../../blogs.html">åšå®¢</a>
            </div>
            <button class="mode-btn" id="modeBtn">ğŸŒ™ æš—é»‘æ¨¡å¼</button>
        </nav>
    </header>

    <main>
        <!-- å›åˆ°åŸå­¦ä¹ é¡µé¢æŒ‰é’® -->
        <a href="index.html" class="back-btn">â† å›åˆ°ç‰©è”ç½‘å­¦ä¹ é¡µé¢</a>
        
        <!-- Markdownå†…å®¹æ¸²æŸ“å®¹å™¨ -->
        <div class="md-content" id="mdContainer"></div>
    </main>

    <footer>
        <p>&copy; 2024 GUKAIYUAN.ASIA | ä»£ç æ–‡æ¡£å±•ç¤º</p>
    </footer>

    <script>
        // 1. æš—é»‘æ¨¡å¼åˆ‡æ¢ï¼ˆä¸åŸæœ‰é¡µé¢ä¿æŒä¸€è‡´ï¼Œæ”¯æŒæœ¬åœ°è®°å¿†ï¼‰
        const modeBtn = document.getElementById('modeBtn');
        const body = document.body;

        // åˆå§‹åŒ–æš—é»‘æ¨¡å¼
        if (localStorage.getItem('darkMode') === 'enabled') {
            body.classList.add('dark-mode');
            modeBtn.textContent = "â˜€ï¸ äº®è‰²æ¨¡å¼";
        }

        // åˆ‡æ¢æš—é»‘æ¨¡å¼
        modeBtn.addEventListener('click', () => {
            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                localStorage.setItem('darkMode', 'disabled');
                modeBtn.textContent = "ğŸŒ™ æš—é»‘æ¨¡å¼";
            } else {
                body.classList.add('dark-mode');
                localStorage.setItem('darkMode', 'enabled');
                modeBtn.textContent = "â˜€ï¸ äº®è‰²æ¨¡å¼";
            }
        });

        // 2. ä»URLå‚æ•°ä¸­è·å–MDæ–‡ä»¶è·¯å¾„
        function getMdFilePath() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('file'); // è·å–?file=xxxä¸­çš„è·¯å¾„
        }

        // 3. åŠ è½½å¹¶è§£æMarkdownæ–‡ä»¶
        async function renderMarkdown() {
            const mdFilePath = getMdFilePath();
            const mdContainer = document.getElementById('mdContainer');

            // æ ¡éªŒMDæ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨
            if (!mdFilePath) {
                mdContainer.innerHTML = '<h2>é”™è¯¯ï¼šæœªæŒ‡å®šä»£ç æ–‡æ¡£è·¯å¾„</h2>';
                return;
            }

            try {
                // åŠ è½½MDæ–‡ä»¶å†…å®¹
                const response = await fetch(mdFilePath);
                if (!response.ok) {
                    throw new Error(`æ— æ³•åŠ è½½æ–‡ä»¶ï¼š${response.status}`);
                }
                const mdContent = await response.text();

                // é…ç½®marked.jsï¼Œå¯ç”¨ä»£ç é«˜äº®
                marked.setOptions({
                    highlight: function(code, lang) {
                        if (lang && hljs.getLanguage(lang)) {
                            // æœ‰æŒ‡å®šè¯­è¨€ï¼Œé«˜äº®å¯¹åº”ä»£ç 
                            return hljs.highlight(code, { language: lang }).value;
                        } else {
                            // æ— æŒ‡å®šè¯­è¨€ï¼Œè‡ªåŠ¨è¯†åˆ«é«˜äº®
                            return hljs.highlightAuto(code).value;
                        }
                    },
                    breaks: true, // æ”¯æŒæ¢è¡Œç¬¦
                    gfm: true // æ”¯æŒGitHub Flavored Markdown
                });

                // è§£æMDå†…å®¹ä¸ºHTMLå¹¶æ’å…¥é¡µé¢
                const htmlContent = marked.parse(mdContent);
                mdContainer.innerHTML = htmlContent;

                // é¢å¤–é«˜äº®ï¼ˆé˜²æ­¢éƒ¨åˆ†ä»£ç æœªè¢«è§£æï¼‰
                document.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
            } catch (error) {
                mdContainer.innerHTML = `<h2>é”™è¯¯ï¼šåŠ è½½ä»£ç æ–‡æ¡£å¤±è´¥</h2><p>${error.message}</p>`;
                console.error('MDåŠ è½½å¤±è´¥ï¼š', error);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåï¼Œæ¸²æŸ“Markdown
        window.addEventListener('DOMContentLoaded', renderMarkdown);
    </script>
</body>
</html>